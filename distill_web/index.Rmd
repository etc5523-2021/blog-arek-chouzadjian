---
title: "Arek Chouzadjian Blog"
description: |
  Welcome to the website. I hope you enjoy it!
site: distill::distill_website
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

# Learn more about creating websites with Distill at:
# https://rstudio.github.io/distill/website.html

```

```{r}
library(tidyverse)
library(lubridate)
library(DT)
library(stargazer)
```

```{r}
library(coronavirus)
```

```{r}
data(coronavirus)
```

```{r}
panama <- coronavirus %>%
  filter(country == "Panama")
```

```{r}
panama_confirmed <- panama %>%
  filter(type == "confirmed")
```

```{r}
confirmed_yr_mth <- panama_confirmed %>%
  mutate(Year = year(date), Month = month(date, label = TRUE)) %>%
  group_by(Year, Month) %>%
  tally(cases) %>%
  rename(Cases = n)
```

```{r}
panama_deaths <- panama %>%
  filter(type == "death")
```

```{r}
deaths_yr_mth <- panama_deaths %>%
  mutate(Year = year(date), Month = month(date, label = TRUE)) %>%
  group_by(Year, Month) %>%
  tally(cases) %>%
  rename(Deaths = n)
```

```{r}
cases_and_deaths <- confirmed_yr_mth %>%
  left_join(deaths_yr_mth) %>%
  mutate(Death_Rate = (Deaths/Cases)*100) %>%
  filter(Cases != 0) %>%
  rename("Death Rate (%)" = Death_Rate)
```

# Data description

The dataset is sourced from the coronavirus package, which is either installed from the CRAN, or is installed directly from GitHub (github.com/RamiKrispin/coronavirus). In this case, I have installed the package from the CRAN. The raw data in the package is pulled from the Johns Hopkins University Centre for Systems Science and Engineering Coronavirus repository. 

The dataset contains data on COVID-19 confirmed cases, deaths and recoveries in each country, from January 22 2020, to 27 May 2021. It also contains the latitude and longitude for each country. As I am only focusing on Panama, I can forego a description of the country, latitude and longitude variables. 

The Panama COVID-19 data features three important variables - date, type and cases. 

- The variable 'date' is a date variable that contains each date, from 22 January 2020, to 27 May 2021, in ymd format. 

- The variable 'type' is a character variable that contains three levels - 'confirmed', 'death' and 'recovered'. 'Confirmed' refers to total cases on any given day, 'death' refers to total deaths on any given day, and 'recovered' refers to the total number of recovered cases reported on any given day. 

- The variable 'cases' is a numeric variable that contains the number of confirmed cases, deaths or recoveries for each day. 

The dataset that is downloaded through the coronavirus package is in a largely tidy format, so not much data wrangling is required. It is very easy to use. 

# Monthly confirmed cases and deaths, and the monthly death rate:

The first table included in this post is an interactive table, created using the `DT` package, that features confirmed cases of, and deaths from, COVID-19 in Panama. It also contains a calculation of the Death Rate per month, which is just the number of deaths per months divided by the number of cases, multiplied by 100.  

```{r}
datatable(cases_and_deaths, class = 'cell-border hover', rownames = FALSE, 
          caption = 'Table of Monthly Confirmed Cases, Deaths and Death Rate')
```

The Death Rate variable I have included is the same as the Case Fatality Rate (CFR) measure. The reason why I have included the Death Rate is that it provides a measure of the efficacy of two things:

1. Level of testing and ability to find cases - The Infection Fatality Rate (IFR) of COVID-19, which represents the number of people who are infected who die, is estimated to be between 1-2%. When the CFR is closer to the IFR, it indicates, generally speaking, that a country's health system is better able to discover and record cases, through higher rates of testing. 

2. Coverage and efficacy of vaccination - In countries with high full vaccination rates, the CFR has dropped significantly. Therefore, the CFR acts as an observable indication of both vaccine efficacy, and vaccine coverage.

Disclaimer - a more accurate 'rolling' CFR would have deaths lag cases by a couple of weeks, so the CFR I have included is more of a rough measure of how the CFR is changing month to month. 

## Findings

### Stages of the pandemic

The number of cases and deaths in Panama starts off relatively slowly, peaking initially in July 2020 at just under 32,000 cases and 800 deaths per month (approx. 1,000 cases and 25 deaths per day). This initial peak occurred noticeably later than countries in Europe and North America, likely due to the virus taking longer to seed in countries less connected to global trade/commerce. 

Cases and deaths then dipped slightly for a few months, but surged massively in December 2020 - January 2021. This represents the main peak of cases and deaths in Panama. In this two month period, nearly 155,000 cases were reported, and just under 2,200 people died. For a country with a pre-pandemic population of around 4.2 million, this is a huge number in such a short space of time. 

Case numbers then dropped markedly, and have followed a similar pattern to what happened in mid-2020 - cases peaked in July 2021 at a very similar level to July 2020. 

### Analysis of the Death Rate

Generally speaking, the Death Rate in Panama is quite close to the estimated IFR of COVID-19, so the country's health system has been quite effective at finding and recording cases. The Death Rate was noticeably higher at the beginning of the pandemic, likely due to lower testing, and less experience in treating the disease. The spike in the Death Rate in February 2021 is most likely due to some deaths associated with January's case spike occurring in February, thereby inflating the Death Rate. 

It is clear to see how the Death Rate has dropped in Panama since May 2021. For instance, July 2021 saw a similar number of cases to July 2020, but only 35% the number of deaths. As of late August, over 60% of Panama's population have received at least one dose of vaccine, and 30% have been fully vaccinated (Our World in Data). Vaccinations are clearly pushing down the Death Rate, but Panama has a fair way to go until it's population has a high level of protection.  

# Summary Statistics Table

The following table is a table of summary statistics, built using the package `stargazer`. 

```{r}
stargazer(cases_and_deaths)
```







